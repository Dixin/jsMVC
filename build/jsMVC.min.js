!function(t,e,n){"use strict";var r=Array.prototype.slice,i=t&&t.jsMVC,a=t&&t.jQuery,o=function(t){return o.config(t)};o.version=.8,o.noConflict=function(){return t&&t.jsMVC===o&&(t.jsMVC=i),o},"function"==typeof define&&define.amd&&define("jsMVC",[],function(){return o}),a&&(a.jsMVC=function(t){var e=o[t];return e?e.apply(n,r.call(arguments,1)):n}),t&&(t.jsMVC=o),e&&(exports=o,"undefined"!=typeof module&&module.exports&&(module.exports=o))}(this.window,!this.window&&require),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.keys,u=Array.prototype.map,s=Array.prototype.some,l=Array.prototype.reduceRight,c=Array.prototype.indexOf,f=function(){},h=function(t){throw new Error(t)},d=function(t,e,n){var r,a;if(!t)return t;for(a=t.length,r=0;a>r&&(!i.call(t,r)||e.call(n,t[r],r,t)!==!1);r++);return t},p=u?function(t,e,n){return u.call(t,e,n)}:function(t,e,n){var r,i=new Array(t.length);for(r=0;r<i.length;r++)r in t&&(i[r]=e.call(n,t[r],r,t));return i},v=l?function(t,e,n){return l.call(t,e,n)}:function(t,e,n){var i,a,o,u=t.length,s=arguments.length>2;for(0!==u||s||h("Empty array must not be reduced with no initial value."),i=s?n:t[u-1],a=s?u-1:u-2,o=a;o>=0;o--)i=e.call(r,i,t[o],o,t);return i},g=s?function(t,e,n){return s.call(t,e,n)}:function(t,e,n){var r,a=t.length;for(r=0;a>r;r++)if(i.call(t,r)&&e.call(n,t[r],r,t))return!0;return!1},m=c?function(t,e){return c.call(t,e)}:function(t,e){var n,r=t.length;for(n=0;r>n;n++)if(t[n]===e)return n;return-1},y=function(t,e){var n,r=e.length,i=new Array(r);for(n=0;r>n;n++)i[n]=t[e[n]];return i},b=!{toString:null}.propertyIsEnumerable("toString"),w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],E=b.length,P=o?function(t,e,n){t&&d(o(t),function(r){return e.call(n,r,t[r],t)})}:b?function(t,e,n){var r,a;if(t){for(r in t)if(i.call(t,r)&&e.call(n,r,t[r],t)===!1)break;for(a=0;E>a&&(r=w[a],!i.call(t,r)||e.call(n,r,t[r],t)!==!1);a++);}}:function(t,e,n){var r;if(t)for(r in t)if(i.call(t,r)&&e.call(n,r,t[r],t)===!1)break},x=function(t,e,n){return P(e,function(e,r){!n&&e in t&&h("Key '"+e+"' must be unique."),t[e]=r}),t},A=function(t){var e,n=0;for(e in t)i.call(t,e)&&n++;return n},_=v(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(t,e){return t["[object "+e+"]"]=e.toLowerCase(),t},{}),C=function(t){switch(t){case null:return"null";case r:return"undefined";default:return _[a.call(t)]||"object"}},M=function(t){return"string"===C(t)},O=function(t){return"function"===C(t)},k=function(t){return"object"===C(t)},L=function(t){return!isNaN(parseInt(t,10))&&isFinite(t)},j=Array.isArray||function(t){return"array"===C(t)},q=function(t){return"number"===C(t)},T=function(t){return t&&t===t.window},S=function(){var t=function(){this.fns=[]};return t.prototype={constructor:t,push:function(t){return O(t)||h("'callback' must be function."),this.fns.push(t)},execute:function(t,e){var n=!1;return d(this.fns,function(r){r.apply(t,e),n=!0}),n},remove:function(t){return t===r?this.fns=[]:d(this.fns,function(e,n,r){return e===t?(r.splice(n,1),!1):!0}),this.fns.length}},t}(),R=function(){return!0},I=function(){return!1};n._={noop:f,error:h,forEachItem:d,indexOf:m,some:g,reduceRight:v,map:p,getArrayValues:y,forEachKey:P,copyProperties:x,countKeys:A,type:C,isString:M,isFunction:O,isObject:k,isInteger:L,isNumber:q,isArray:j,isWindow:T,Functions:S,returnTrue:R,returnFalse:I}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Array.prototype.slice,a=n._,o=a.Functions,u=a.returnTrue,s=a.returnFalse,l={},c=function(t,e){var r=l[t];return r||(r=l[t]=new o),r.push(e),n},f=function(t,e){var n=l[t];n&&0===n.remove(e)&&delete l[t]},h=function(t){var e=l[t];e&&e.execute(e,i.call(arguments,1))},d=function(){var t=function(){this.timeStamp=Date.now(),this.result=r};return t.prototype={constructor:t,isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,isErrorHandled:s,preventDefault:function(){this.isDefaultPrevented=u},stopPropagation:function(){this.isPropagationStopped=u,this.isImmediatePropagationStopped=u},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u},handleError:function(){this.isErrorHandled=u}},t}();n.event=d.prototype,n.on=c,n.off=f,a.Event=d,a.trigger=h}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,a=n._,o=a.noop,u=a.error,s=a.forEachKey,l=a.some,c=a.isString,f=a.isFunction,h=a.isObject,d=(a.copyProperties,"separator"),p="content",v="literal",g="parameter",m="/",y="*",b="{",w="}",E="{{",P="}}",x="",A=function(t){var e=t.replace(E,x).replace(P,x);return-1!==e.indexOf(b)||-1!==e.indexOf(w)?null:t.replace(E,b).replace(P,w)},_=function(t){var e,n;if(0===t.length)return!1;for(e=0;e<t.length;e++)if(n=t[e],n===m||n===b||n===w)return!1;return!0},C=function(t,e){for(;;){if(e=t.indexOf(b,e),-1===e)return-1;if(e+1===t.length||e+1<t.length&&t.charAt(e+1)!==b)return e;e+=2}},M=function(t){this.isCatchAll=!1,t.charAt(0)===y&&(t=t.substr(1),this.isCatchAll=!0),this.type=g,this.value=t},O=function(t){for(var e,n,r,i,a,o=0,u=[];o<t.length;){if(e=C(t,o),-1===e){if(n=A(t.substr(o)),null===n)return null;n.length>0&&u.push({type:v,value:n});break}if(r=t.indexOf(w,e+1),-1===r)return null;if(i=A(t.substr(o,e-o)),null===i)return null;i.length>0&&u.push({type:v,value:i}),a=t.substr(e+1,r-e-1),u.push(new M(a)),o=r+1}return u},k=function(t){var e,n,r,i=[];if(!t||0===t.length)return i;for(e=0;e<t.length;){if(n=t.indexOf(m,e),-1===n){var a=t.substring(e);a.length>0&&i.push(a);break}r=t.substr(e,n-e),r.length>0&&i.push(r),i.push(m),e=n+1}return i},L=function(t){var e,n,r,i=[];for(e=0;e<t.length;++e)if(n=t[e],r=n===m)i.push({type:d,value:m});else{var a=O(n);i.push({type:p,value:a})}return i},j=function(t){return l(t.value,function(t){return t.type===g&&t.isCatchAll})},q=function(t,e){var n,r,i,a,o,u=!1;for(r=0;r<t.length;++r){if(i=t[r],n===i.type)return!1;if(n=i.type,i.type!==v){if(i.type!==g)return!1;if(a=i,o=a.value,a.isCatchAll&&(u=!0),!_(o))return!1;if(e[o])return!1;e[o]=a}}return u&&1!==t.length?!1:!0},T=function(t){return t.isCatchAll===!0},S=function(t){var e,n,r,i,a={},o=null,u=!1;for(e=0;e<t.length;++e){if(n=t[e],u)return!1;if(null===o)o=n===m,r=o;else{if(r=n===m,r&&o)return!1;o=r}if(!r){if(i=O(n),null===i)return!1;if(!q(i,a))return!1;u=l(i,T)}}return!0},R=function(t){var e,n;return t||(t=x),t[0]===m||-1!==t.indexOf("?")?null:(e=k(t),S(e)?n=L(e):null)},I=function(t){var e;return t?(h(t)||u("'values' must be plain object."),e={},s(t,function(t,n){t=t.toLowerCase(),i.call(e,t)&&u("Keys of 'values' must be case-insensitively unique."),e[t]=n}),e):{}},V=function(t,e,n,r){var i,a=e.join(x),o=t.value[0];i=a.length>0?a:n[o.value],r[o.value]=i},F=function(t,e,n,r){if(!e){if(t.value.length>1)return!1;var a=t.value[0];if(a.type!==g)return!1;if(i.call(n,a.value)){var o=n[a.value];return r[a.value]=o,!0}return!1}for(var u=e.length,s=t.value.length-1,l=null,c=null;s>=0;){var f,h=u,d=null;if(t.value[s]&&t.value[s].type===g)d=t.value[s],l=d;else{if(!t.value[s]||t.value[s].type!==v)return!1;f=t.value[s],c=f;var p=u-1;if(null!==l&&p--,0>p)return!1;var m=e.lastIndexOf(f.value,p);if(-1===m)return!1;if(s===t.value.length-1&&m+f.value.length!==e.length)return!1;h=m}if(null!==l&&(null!==c&&null===d||0===s)){var y,b;null===c?(y=0===s?0:h+c.value.length,b=u):0===s&&null!==d?(y=0,b=u):(y=h+c.value.length,b=u-y);var w=e.substr(y,b);if(!w)return!1;r[l.value]=w,l=null,c=null}u=h,s--}return 0===u||t.value[0]&&"parameter"===t.value[0].type},D=function(t,e,n){var r=k(e);n||(n={});for(var a={},o=!1,u=!1,l=0;l<t.length;l++){var c=t[l];r.length<=l&&(o=!0);var f=o?null:r[l];if(c&&c.type===d){if(!o&&f!==m)return null}else{var h=c;if(!h||h.type!==p)return null;if(j(h))V(h,r.slice(l),n,a),u=!0;else if(!F(h,f,n,a))return null}}if(!u&&t.length<r.length)for(var v=t.length;v<r.length;v++)if(r[v]!==m)return null;return null!==n&&s(n,function(t,e){i.call(a,t)||(a[t]=e)}),a},H=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.type!==d){var i;if(r.type!==p)return!1;i=r;for(var a=0;a<i.value.length;++a){var o=i.value[a];if(o.type!==v){var u=o;if(null===u)return!1;if(!e(u))return!1}}}}return!0},N=function(t,e){var n=null;return H(t,function(t){return e===t.value?(n=t,!1):!0}),n},K=function(t,e){return t.isCatchAll?{isRequired:!1,defaultValue:r}:{isRequired:!i.call(e,t.value),defaultValue:e[t.value]}},U=function(t){return c(t)?t.length>0:!!t},B=function(t,e){return c(t)&&c(e)?t===e:null!==t&&t!==r&&null!==e&&e!==r?t.toString()===e.toString():t===e},$=t?function(t){return t}:encodeURIComponent,z=t?function(t){return t}:e("querystring").escape,W=function(t,e,n,r,a){e=e||{},n=n||{},r=r||{};var o={},u={};s(n,function(t){u[t]=null}),H(t,function(t){var r=t.value,a=n[r],s=i.call(n,r);s&&delete u[r];var l=e[r],c=i.call(e,r);return s&&c&&!B(l,a)?!1:(s?U(a)&&(o[r]=a):c&&(o[r]=l),!0)}),s(n,function(t,e){U(e)&&(i.call(o,t)||(o[t]=e))}),s(e,function(e,n){var r=e;if(!i.call(o,r)){var a=N(t,r);null===a&&(o[r]=n.Value)}}),H(t,function(t){if(!i.call(o,t.value)){var e=K(t,r);e.isRequired||(o[t.value]=e.defaultValue)}return!0});var l=H(t,function(t){var e=K(t,r);return e.isRequired&&!i.call(o,t.value)?!1:!0});if(!l)return null;var c=I(r);H(t,function(t){return delete c[t.value],!0});var f=!1;if(s(c,function(t,e){return i.call(n,t)&&(delete u[t],!B(n[t],e))?(f=!0,!1):!0}),f)return null;for(var h=x,y=x,b=!1,w=0;w<t.length;w++){var E=t[w];if(E.type===d){if(b&&y.length>0&&(h+=y,y=x),b=!1,y.length>0&&y[y.length-1]===m)return null;y+=m}else{var P;if(E.type!==p)return null;P=E;for(var A=!1,_=0;_<P.value.length;++_){var C,M=P.value[_];if(M.type===v)C=M,b=!0,y+=$(C.value);else{var O;if(M.type!==g)return null;O=M,b&&y.length>0&&(h+=y,y=x,A=!0),b=!1;var k=o[O.value],L=i.call(o,O.value);L&&delete u[O.value];var j=r[O.value];B(k,j)?y+=$(k?k.toString():x):(y.length>0&&(h+=y,y=x),h+=$(k?k.toString():x),A=!0)}}A&&y.length>0&&(h+=y,y=x)}}if(b&&y.length>0&&(h+=y),a&&s(a,function(t){delete u[t]}),u){var q=!0;s(u,function(t){i.call(o,t)&&(h+=q?"?":"&",q=!1,h+=z(t),h+="=",h+=z(o[t].toString()))})}return{url:h,values:o}},X=function(t,e,n,r){this.route=t,this.routeHandler=e,this.values=n,this.dataTokens=r},G=function(t,e,n){this.route=t,this.virtualPath=e,this.dataTokens=n},Q=function(t,e,n,r,i,a){var o=i[r];if(f(e))return e(o,n,t,r,i,a);c(e)||u("'constraint' must be function or string");var s=o.toString(),l=new RegExp("^("+e+")$","i");return s.match(l)},J=function(t,e,n,r,i){var a=!0;return s(e,function(e,o){return Q(t,o,n,e,r,i)?!0:(a=!1,!1)}),a},Y=function(){var t=function(t,e,n,r,i,a){c(t)||u("'url' must be valid."),t=t.toLowerCase(),this._segments=R(t),null===this._segments&&u("'url' must be valid."),i?f(i)||u("'routeHandler' must be valid."):i=o,a&&!c(a)&&u("'name' must be string or empty."),this.url=t,this.routeHandler=i,this.defaults=I(e),this.constraints=I(n),this.dataTokens=I(r),this.name=a};return t.prototype={constructor:t,getVirtualPathData:function(t,e){t=I(t),e=I(e);var n=W(this._segments,e,t,this.defaults,this.constraints);if(null===n)return null;if(!J(this,this.constraints,n.url,n.values,!1))return null;var r=new G(this,n.url,I(this.dataTokens));return r},getRouteData:function(t){c(t)||u("'virtualPath' must be string."),t=t.toLowerCase();var e=D(this._segments,t,this.defaults);if(null===e)return null;if(!J(this,this.constraints,t,e,!0))return null;var n=new X(this,this.routeHandler,I(e),I(this.dataTokens));return n}},t}(),Z=function(){var t=function(t,e){Y.call(this,t,{},e,{},o)};return t.prototype={constructor:t,getVirtualPathData:function(){return null},getRouteData:Y.prototype.getRouteData},t}(),te=function(){var t={},e=[];this.getRouteData=function(t){c(t)||u("'virtualPath' must be string."),t=t.toLowerCase();for(var n=0;n<e.length;++n){var r=e[n].getRouteData(t);if(r)return r}return null},this.getVirtualPathData=function(t,n,r){r&&!f(r)&&u("'filter' must be function.");for(var i=0;i<e.length;++i){var a=e[i];if(!r||r(a)){var o=a.getVirtualPathData(t,n);if(o)return o}}return null},this.push=function(n){if(n.constructor!==Y&&n.constructor!==Z&&u("'route' must be valid."),n.name){var r=n.name.toLowerCase();i.call(t,r)&&u("'name' must be unique."),t[r]=n}return e.push(n),n},this.get=function(n){if(c(n)){var r=n.toLowerCase();return t[r]}return e[n]},this.ignore=function(t,e){return this.push(new Z(t,e))},this.clear=function(){t={},e=[]},this.length=function(){return e.length},this.Route=function(t,e,n,r,i,a){return new Y(t,e,n,r,i,a)}};n.routeTable=new te,a.getUrlParts=k,a.getSegmentLiteral=A,a.getIndexOfFirstOpenParameter=C,a.getUrlSubsegments=O,a.isUrlSubsegmentsValid=q,a.isUrlPartsValid=S,a.matchSegments=D,a.getParsedSegments=R,a.forEachParameterSubsegment=H,a.encodeUrl=$,a.escapeUrlDataString=z}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";if(t){var i,a=t.location,o=t.history,u=t.document,s=u.documentMode,l=n._,c=l.error,f=l.type,h=l.trigger,d=l.Event,p=l.copyProperties,v=l.isFunction,g=n.routeTable,m='<iframe tabindex="-1" style="display: none; visibility: hidden;" src="javascript:0"></iframe>',y="#",b="!",w=b.length,E="hashchange",P="on"+E,x="?",A=a.href,_=function(t){return t.replace(/^[^#]*#?(.*)$/,"$1")},C=function(t){0===t.indexOf(y)&&(t=t.substr(1)),0===t.indexOf(b)&&(t=t.substr(w)),t=b+t,a.hash=t},M=function(t){var e,n,o,u=new d;return t=t||{},i=a.href,e=o=t.newHash||_(i),e.substr(0,w)===b&&(e=e.substr(w)),n=e.indexOf(x),n>=0&&(e=e.slice(0,n)),p(u,{type:t.type||E,timeStamp:t.timeStamp||u.timeStamp,target:t.target,currentTarget:t.currentTarget,virtualPath:e,routeData:g.getRouteData(e),newHref:t.newURL||i,oldHref:t.oldURL||A,newHash:o,oldHash:t.oldHash||_(A),request:r,response:r},!0),A=i,u},O=function(e){var n,r,o,l="onreadystatechange",f="onload",d=function(e){h("request",M(e||t.event))};P in t&&t.addEventListener?t.addEventListener(E,d,!1):t.attachEvent?P in t&&s&&s>7?t.attachEvent(P,d):l in u&&(n=function(){var e,n,r,s=u.createElement(m),l=function(){s.detachEvent(f,l),t.setInterval(function(){i=a.href,A!==i?(o.document.title=u.title,o.document.open(),o.document.close(),o.location.hash=_(i),n=o.location.href,h("request",M({target:t,currentTarget:o}))):(e=o.location.href,n!==e&&(n=e,a.hash=_(e),i=a.href,h("request",M({target:o,currentTarget:o}))))},100)};s.attachEvent("onload",l),r=t.document.body,r.parentNode.insertBefore(s,r.nextSibling),o=s.contentWindow,n=o.location.href},r=function(){"complete"===u.readyState&&(u.detachEvent(l,r),n())},"complete"===u.readyState?n():u.attachEvent(l,r)):c("Please upgrade browser to latest version."),v(e)&&e(o||t)},k=function(t,e){var n,r,i=a.href;switch(e=e||{},f(t)){case"number":return o.go(t),a.href!==i;case"string":return C(t),a.href!==i;case"object":return r=M().routeData,n=g.getVirtualPathData(t,r?r.values:{},e.filter),n?(C(n.virtualPath),a.href!==i):!1;default:return!1}};n.go=k,n.current=M,l.listen=O}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";if(!t){var i,a=n._,o=a.trigger,u=a.copyProperties,s=a.Event,l=a.type,c=a.isFunction,f=n.routeTable,h=n.status,d=e("http"),p=e("url"),v=e("domain"),g="/",m=g.length,y=function(t){var e,n,a,o,l,c,h=new s;return t=t||{},e=t.request,e?(n=e.method,o=p.parse(e.url),o.protocol=e.connection.encrypted?"https":"http",o.host=e.headers.host,l=e.headers.referer||e.headers.Referer):(n=t.type,o=t.newHref||t.virtualPath,o=p.parse(o),i&&(c=i.address(),c&&(o.hostname="0.0.0.0"===c.address?"localhost":c.address,o.port=c.port)),l=t.oldHref),l=l!==r?p.parse(l):{},a=o.pathname,a&&a.substr(0,m)===g&&(a=a.substr(m)),u(h,{type:n,target:t.server||null,currentTarget:t.server||null,virtualPath:a,routeData:a?f.getRouteData(a):null,newHref:p.format(o),oldHref:l.href,newHash:o.hash,oldHash:l.hash,request:e,response:t.response})},b=function(t){var e=v.create();e.run(function(){i=d.createServer().on("request",function(t,e){var n=v.create(),r=y({request:t,response:e,domain:n,server:this});n.add(t),n.add(e),n.on("error",function(t){try{r.status=h.internalError,r.error=t,o("fail",r),e.on("close",function(){n.dispose()})}catch(i){n.dispose()}}),o("request",r)}),c(t)&&t(i,e)})};n.go=function(t,e){var n;switch(e=e||{},l(t)){case"string":return o("request",y({newHref:t})),!0;case"object":return n=f.getVirtualPathData(t,{},e.filter),n?(o("request",y(u({virtualPath:n.virtualPath},e))),!0):!1;default:return!1}},n.current=y,a.listen=b}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,a=n.routeTable,o=a.Route,u=n._,s=u.error,l=u.isString,c=u.isFunction,f=u.isInteger,h=u.forEachItem,d=u.forEachKey,p=u.copyProperties,v=u.some,g=u.reduceRight,m=u.map,y=u.Event,b=u.returnFalse,w="/",E="",P={notFound:404,internalError:500,badRequest:400,ok:200},x="error",A="beforeAction",_="afterAction",C="authorize",M=10,O=0,k="id",L=function(t,e){return e&&(t===r||t===E)||l(t)&&-1===t.indexOf(w)&&t!==E},j=function(t,e){return L(t,e)||s(e?"Route value must be valid.":"Route value must be valid and not empty."),t?t.toLowerCase():t},q=function(t,e){return(e?e+w:E)+j(t)},T=function(){var t=function(){this.items={}};return t.prototype={constructor:t,push:function(t,e){var n=t.toLowerCase();return i.call(this.items,n)&&s("Key '"+t+"' must be unique."),this.items[n]=e,e},get:function(t){return this.items[t.toLowerCase()]},has:function(t,e){return t=t.toLowerCase(),arguments.length>1?this.items[t]===e:i.call(this.items,t)}},t}(),S=function(){var t=function(t,e){this.isOrderRequired=t,this.items=e||[],t&&this.items.length>1&&this.sort()};return t.prototype={constructor:t,sort:function(t){t=t||function(t,e){return t.order-e.order},this.items.sort(t)},push:function(t){return this.isOrderRequired&&!f(t.order)&&s("'order' must be integer."),this.items.push(t),this.isOrderRequired&&this.sort(),t},get:function(t){return this.items[t]},has:function(t){for(var e=0;e<this.items.length;e++)if(t===this.items[e])return!0;return!1},toArray:function(){return this.items.slice()},forEach:function(t,e){h(this.items,t,e)},map:function(t,e){return new S(this.isOrderRequired,m(this.items,t,e))},reverse:function(){return new S(this.isOrderRequired,this.items.reverse())},reduceRight:function(t,e){return g(this.items,t,e)},some:function(t,e){return v(this.items,t,e)},length:function(){return this.items.length}},t}(),R=new T,I=new T,V=new T,F=new S(!0),D=function(t,e,n,r,i){t&&!c(t)&&s("'authorize' must be empty or function."),e&&!c(e)&&s("'beforeAction' must be empty or function."),n&&!c(n)&&s("'afterAction' must be empty or function."),r&&!c(r)&&s("'fail' must be empty or function."),this[C]=t,this[A]=e,this[_]=n,this[x]=r,this.order=parseInt(i,M)||O,f(this.order)||s("'order' must be integer or undefined.")},H=function(t){var e,n=new S(!0);return h(t,function(t){e=new D(t[C],t[A],t[_],t[x],t.order),n.push(e)}),n},N=function(t,e){var n=t.result,i=e(t);return i!==r?(t.result=i,!0):(t.result=n,!1)},K=function(t,e,n){var r;t.isPropagationStopped()||(t.isImmediatePropagationStopped=b,h(e,function(e){return t.isImmediatePropagationStopped()?!1:(e&&e.forEach(function(e){return t.isImmediatePropagationStopped()?!1:(r=e[n],r&&N(t,r),!0)}),!0)}))},U=function(t,e){var n;h(e,function(e){return t.isErrorHandled()?!1:(e&&e.forEach(function(e){return t.isErrorHandled()?!1:(n=e[x],n&&N(t,n),!0)}),!0)})},B=function(t){var e=new D(t[C],t[A],t[_],t[x],t.order),n=t.target;n?n.filters?n.filters.push(e):s("'target' must be valid area, controller, or action."):F.push(e)},$=function(){return F.toArray()},z=function(){var t=function(t,e,n,r){t&&I.has(t.virtualPath,t)||s("'controller' must be valid."),e=j(e),c(n)||s("'execute' must be function."),this.controller=t,this[k]=e,this.execute=n,this.filters=r,this.virtualPath=q(e,t.virtualPath)};return t.prototype={constructor:t,Filter:function(t){return t.target=this,B(t)},getFilters:function(){return this.filters.toArray()}},t}(),W=function(t){var e,n=H(t.filters);return c(t)&&(t={controller:t.controller,execute:t},t[k]=t.actionId),e=new z(t.controller,t[k],t.execute,n),V.push(e.virtualPath,e)},X=function(){var t=function(t,e,n){t=j(t),e&&!R.has(e.virtualPath,e)&&s("'area' must be valid or empty."),this[k]=t,this.area=e,this.virtualPath=q(t,e?e.virtualPath:r),this.filters=n};return t.prototype={constructor:t,Action:function(t){return t.controller=this,W(t)},Filter:function(t){return t.target=this,B(t)},getAction:function(t){return V.get(q(t,this.virtualPath))},getFilters:function(){return this.filters.toArray()}},t}(),G=function(t,e){return c(t)&&(t={execute:t}),i.call(t,k)||(t[k]=e),t},Q=function(t){var e,n;return!t.area&&t.areaId&&(t.area=R.get(t.areaId)),e=H(t.filters),n=new X(t[k],t.area,e),I.push(n.virtualPath,n),d(t.actions,function(t,e){e=G(e,t),n.Action(e)}),n},J=function(t){return I.get(t)},Y=function(){var t=function(t,e){this.virtualPath=this[k]=j(t),this.filters=e};return t.prototype={constructor:t,Route:function(t){return t.areaId=this[k],ae(t)},Controller:function(t){return t.area=this,Q(t)},Filter:function(t){return t.target=this,B(t)},getController:function(t){return I.get(q(t,this.virtualPath))},getFilters:function(){return this.filters.toArray()}},t}(),Z=function(t){var e=H(t.filters),n=new Y(t[k],e);return R.push(n.virtualPath,n),d(t.controllers,function(t,e){i.call(e,k)||(e[k]=t),n.Controller(e)}),d(t.routes,function(t,e){i.call(e,k)||(e[k]=t),n.Route(e)}),n},te=function(t){return R.get(t)},ee=function(t,e){e&&c(e.execute)&&e.execute(t)},ne=function(t,e,n,r){if(p(t,{status:n,error:e},!0),U(t,r),!t.isErrorHandled())throw e;return ee(t,t.result)},re=function(t,e,n,r,i){var a,o,u,s=t.dataTokens.event||new y;delete t.dataTokens.event;try{p(s,{actionId:j(n),controllerId:j(r),areaId:j(i,!0)})}catch(l){return ne(s,l,P.badRequest,[F])}if(a=V.get(q(n,q(r,i))),!a)return ne(s,new Error("Action cannot be found."),P.notFound,[F]);p(s,{actionVirtualPath:a.virtualPath,action:a,controller:a.controller,area:a.controller.area}),o=[F,s.area?s.area.filters:null,s.controller.filters,s.action.filters],u=[s.action.filters.reverse(),s.controller.filters.reverse(),s.area?s.area.filters.reverse():null,F.reverse()];try{return K(s,o,C),K(s,o,A),s.isDefaultPrevented()||N(s,a.execute),K(s,u,_),ee(s,s.result)}catch(c){return ne(s,c,s.status||P.internalError,o)}},ie=function(t,e){re(t,e,t.values.action,t.values.controller,t.dataTokens.area)},ae=function(t){t.areaId&&(t.dataTokens=t.dataTokens||{},t.dataTokens.area=j(t.areaId));var e=new o(t.url,t.defaults,t.constraints,t.dataTokens,ie,t[k]);return a.push(e)};n.Route=ae,n.Area=Z,n.Controller=Q,n.Filter=B,n.getArea=te,n.getController=J,n.getFilters=$,n.status=P,u.executeGlobalErrorFilters=function(t){U(t,[F])}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";var r=n._,i=r.noop,a=function(){var t=function(){};return t.prototype={constructor:t,execute:i},t}();n.event.noop=function(){return new a}}(this.window,!this.window&&require,this.jsMVC||exports),function(t){"use strict"}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";if(!t){var r=n._.isString,i=e("fs"),a=e("path"),o=".",u=o.length,s={css:"text/css",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",js:"application/javascript"},l=function(t){var e=a.extname(t);return 0===e.indexOf(o)&&(e=e.substr(u)),s[e.toLowerCase()]},c=n.status,f=function(t){t.writeHead(c.notFound),t.end()},h=function(t,e){return r(e)||(e=n.config.appPath),r(e)?a.resolve(e,t):t},d=function(){var t=function(t,e,n){this.event=t,this.filePath=h(e,n)};return t.prototype={constructor:t,execute:function(){var t=this.event.response,e=this.filePath,n=l(e);n?i.readFile(e,function(e,r){e?f(t):(t.writeHead(c.ok,{"Content-Type":n,"Content-Length":r.length}),t.end(r))}):f(t)}},t}();n.event.file=function(t,e){return new d(this,t,e)}}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,a=n._,o=a.error,u=a.forEachItem,s=a.forEachKey,l=a.copyProperties,c=a.isFunction,f=a.isObject,h=a.isArray,d=a.indexOf,p=a.getArrayValues,v=a.countKeys,g={change:"change",add:"add",remove:"remove"},m=function(t,e,n,r,i){u(t._eventListeners[e],function(a){a.call(t,n,r,e,i)}),arguments.length>4&&u(t._keyEventListeners[e][i],function(a){a.call(t,n,r,e,i)})},y=function(t,e,n,r){var a=t._keyEventListeners[e];i.call(a,r)||(a[r]=[]),a[r].push(n)},b=function(t,e,n){t._eventListeners[e].push(n)},w=function(t,e){s(t._keyEventListeners,function(n){t._keyEventListeners[n][e]=[]})},E=function(t,e,n){if(e in t._keyEventListeners){var r=t._keyEventListeners[e];n in r&&(r[n]=[])}},P=function(t,e,n){if(e in t._eventListeners)for(var r=t._eventListeners[e],i=0;i<r.length;i++)r[i]===n?r.splice(i,1):i++},x=function(t,e){var n=t._eventListeners;e in n&&(n[e]=[])},A=function(t,e,n,r){if(e in t._keyEventListeners){var i=t._keyEventListeners[e];if(r in i){var a=i[r];if(a)for(var o=0;o<a.length;)a[o]===n?a.splice(o,1):o++}}},_=function(t,e){var n;s(t._eventListeners,function(t,r){for(n=0;n<r.length;)r[n]===e?r.splice(n,1):n++}),s(t._keyEventListeners,function(t,r){s(r,function(t,r){for(n=0;n<r.length;)r[n]===e?r.splice(n,1):n++})})},C=function(){var t=function(t,e){this.isArray=h(t),this.isArray||f(t)||o("'data' must be object or array."),this.data=e?this.isArray?t.slice():l({},t,!0):t;var n=this;this._eventListeners={},s(g,function(t){n._eventListeners[t]=[]}),this._keyEventListeners={},s(g,function(t){n._keyEventListeners[t]={}})};return t.prototype={constructor:t,length:function(){return this.isArray?this.data.length:v(this.data)},get:function(t){return this.data[t]},set:function(t,e){i.call(this.data,t)||o("Key or index '"+t+"' must be existing.");var n=this.data[t];return n!==e&&(this.data[t]=e,m(this,g.change,e,n,t)),this},add:function(){var t,e,n=arguments,a=n.length;if(2>a)this.isArray||o("Key and Value must be provided for object."),t=this.data.length,e=n[0],this.data.push(e),m(this,g.add,e,r,t);else if(2===a)this.isArray&&o("Key must not be provided for array."),t=n[0],i.call(this.data,t)&&o("Key '"+t+"' must be unique."),e=n[1],this.data[t]=e,m(this,g.add,e,r,t);else{this.isArray&&o("Dependency must be used for object."),t=n[0];var u=n[1],s=n[2];e=u.apply(this,p(this.data,s)),this.data[t]=e,this.on(g.change,function(e,n,r,i){d(s,i)>=0&&this.set(t,u.apply(this,p(this.data,s)))}),m(this,g.add,e,r,t)}return this},push:function(t){return this.add(t)},pop:function(){this.isArray||o("Popping an item must be used for array.");var t=this.data[this.data.length-1];return this.removeAt(this.data.length-1),t},addAt:function(t,e){return this.isArray||o("Adding item at an index must be used for array."),t>this.data.length&&o("'index' must not be greater than array's length"),this.data.splice(t,0,e),m(this,g.add,e,r,t),this},remove:function(){var t,e,n=arguments;if(this.isArray){for(e=n[0],t=0;t<this.data.length;t++)if(this.data[t]===e){this.data.splice(t,1),m(this,g.remove,r,e,t),w(this,t);break}}else t=n[0],e=this.data[t],delete this.data[t],m(this,g.remove,r,e,t),w(this,t);return this},removeAll:function(t){var e;if(this.isArray){if(arguments.length<1)for(t=[],e=this.data.length-1;e>=0;e--)t.push(e);else t.sort(function(t,e){return e-t});for(e=0;e<t.length;e++)this.removeAt(t[e])}else arguments.length<1&&(t=[],s(this.data,function(e){t.push(e)})),u(t,function(t){this.remove(t)})},removeAt:function(t){this.isArray||o("Removing item at an index must be used for array."),t>this.data.length&&o("'index' must not be out of array's range.");var e=this.data[t];this.data.splice(t,1),m(this,g.remove,r,e,t),w(this,t)},on:function(t,e,n){if(arguments.length<3){if(!c(t))return b(this,t.toLowerCase(),e),this;n=e,e=t,t=g.change}return y(this,t.toLowerCase(),e,n),this},off:function(){var t,e=arguments,n=e[0];if(c(n))_(this,n);else{var r=n.toLowerCase();e.length>2?(n=e[1],t=e[2],A(this,r,n,t)):2===e.length?(n=e[1],c(n)?P(this,r,n):(t=n,E(this,r,t))):x(this,r)}return this},forEach:function(t,e){arguments.length<2&&(e=this),this.isArray?u(this.data,t,e):s(this.data,t,e)},sort:function(){}},t}(),M=function(t){return t&&t.constructor===C},O=function(t,e){return M(t)?t.get(e):t[e]};n.Observable=function(t){return new C(t)},n.Observable.eventTypes=g,n.isObservable=M,a.getValue=O}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";if(t){var i=t.document,a=t.jQuery,o=n._,u=o.noop,s=o.error,l=o.forEachItem,c=o.forEachKey,f=o.isFunction,h=o.isObject,d=o.isArray,p=o.isNumber,v=o.getValue,g=n.Observable.eventTypes,m=n.isObservable,y=function(t){var e=!1;return c(t,function(){return e=!0,!1}),e},b=String.prototype.trim,w=b?function(t){return b.call(t)}:function(t){return t.replace(/^\s+|\s+$/g,"")},E=i.createElement("div"),P="data-",x="bind",A="each",_="bindback",C=P+x,M=P+A,O=P+_,k=";",L=":",j=".",q={blur:!0,change:!0,click:!0,contextmenu:!0,copy:!0,cut:!0,dbclick:!0,error:!0,focus:!0,focusin:!0,focusout:!0,hashchange:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,mousewheel:!0,paste:!0,reset:!0,resize:!0,scroll:!0,select:!0,submit:!0,textinput:!0,unload:!0,wheel:!0},T=function(){var t={};return E.textContent===r&&E.innerText!==r?t.textContent="innerText":E.innerText===r&&E.textContent!==r&&(t.innerText="textContent"),t}(),S="on",R="jsdatabindid",I=P+R,V=E.dataset?function(t,e){t.dataset[R]=e}:function(t,e){t.setAttribute(I,e)},F=function(t){return t.getAttribute(I)},D=function(t){t.removeAttribute(I)},H=E.dataset?function(t){return t.dataset[x]}:function(t){return t.getAttribute(C)},N=E.dataset?function(t){return t.dataset[_]}:function(t){return t.getAttribute(O)},K=E.dataset?function(t){return t.dataset[A]}:function(t){return t.getAttribute(M)},U=t.addEventListener?function(t,e,n){l(w(e).split(/\s+/),function(e){t.addEventListener(e,n,!1)})}:t.attachEvent?function(t,e,n){l(w(e).split(/\s+/),function(e){t.attachEvent(S+e,n)})}:u,B=t.removeEventListener?function(t,e,n){l(w(e).split(/\s+/),function(e){t.removeEventListener(e,n,!1)})}:t.detachEvent?function(t,e,n){l(w(e).split(/\s+/),function(e){t.detachEvent(S+e,n)})}:u,$=0,z=function(){return++$},W=/(\[\d+\])/g,X=".$1",G=function(t){return t=w(t).replace(W,X),t.length>0?t:null},Q=/^\[\d+\]$/,J="this",Y={add:function(t,e){U(t,"change",e)},remove:function(t,e){B(t,"change",e)}},Z=function(){return t.ActiveXObject?9===i.documentMode?{add:function(t,e){l(["propertychange","keyup"],function(n){t.attachEvent(S+n,e)})},remove:function(t,e){l(["propertychange","keyup"],function(n){t.detachEvent(S+n,e)})}}:{add:function(t,e){t.attachEvent(S+"propertychange",e)},remove:function(t,e){t.detachEvent(S+"propertychange",e)}}:{add:function(t,e){l(["input","blur"],function(n){t.addEventListener(n,e,!1)})},remove:function(t,e){l(["input","blur"],function(n){t.removeEventListener(n,e,!1)})}}}(),te=t.ActiveXObject?function(t,e,n){switch(type){case"propertychange":case"keyup":t.detachEvent(S+e,n);default:B(t,e,n)}}:function(t,e,n){B(t,e.type,n)},ee=function(t,e){switch(e.type){case"propertychange":return"value"===e.propertyName;case"keyup":case"change":case"input":case"blur":var n=t.tagName,r=ne[n];return"INPUT"===n&&(r=r[t.type]),r;default:return!1}},ne={TEXTAREA:{value:Y},OUTPUT:{value:Y},SELECT:{selectedIndex:Y},OPTION:{selected:Y},INPUT:{radio:{checked:Y},checkbox:{checked:Y},text:{value:Z},password:{value:Z},color:{value:Y},date:{value:Y},datetime:{value:Y},"datetime-local":{value:Y},email:{value:Y},month:{value:Y},number:{value:Y},range:{value:Y},search:{value:Y},tel:{value:Y},time:{value:Y},url:{value:Y},week:{value:Y}}},re=function(t,e){var n=t.tagName,r=ne[n];return r&&("INPUT"!==n||(r=r[t.type]))?r[e]:null},ie=function(t,e){if(e&&(t=G(t)),!t)return null;var n=t.split(j);return n[0]===J&&(n=n.slice(1)),l(n,function(t,e){Q.test(t)&&(n[e]=parseInt(t.substring(1,t.length-1),10))}),n},ae=function(t,e){var n;
if(!t)return null;t=t.split(k);for(var r={},i=0;i<t.length;i++){var a=t[i].split(L);2!==a.length&&s("Bind declaration '"+a+"' must be valid.");var o=G(a[0]);o||s("Element path of bind declaration '"+a+"' must be valid."),n=ie(a[1],!0),n||s("Data path of bind declaration '"+a+"' must be valid."),e&&(n=e.concat(n)),r[o]=n}return i>0?r:null},oe={},ue=function(t){var e=t.id;e in oe&&s("Property binding (id: "+e+") must has unique id."),oe[e]=t},se=function(t){return oe[t]},le=function(t){var e=se(t);e&&(e.eventListeners&&(c(e.eventListeners,function(t,n){B(e.element,t,n),delete e.eventListeners[t]}),delete e.eventListeners),e.propertyBackMap&&(c(e.propertyBackMap,function(t){var n=re(e.element,t);n.remove(e.element,Pe),delete e.propertyBackMap[t]}),delete e.propertyBackMap),delete e.data,delete e.element,delete e.id,delete oe[t])},ce={},fe=function(t){var e=t.id;e in ce&&s("Element binding (id: "+e+") must has unique id."),ce[e]=t},he=function(t){return ce[t]},de=function(t){var e=he(t);e&&(delete e.id,delete e.template,delete e.parentElement,delete e.templateChildCount,delete ce[t])},pe=function(t,e,n,i,a,o,u){var s=i*u;switch(n){case g.add:var l=o.cloneNode(!0);Ce(l,t);var c=a.childNodes[s];a.insertBefore(l,c?c:null);break;case g.remove:for(var f=0;u>f;f++){var h=a.childNodes[s];Ce(h,r),a.removeChild(h)}break;case g.change:for(f=s;s+u>f;f++){var d=a.childNodes[f];Ce(d,r),Ce(d,t)}}},ve=function(t,e){pe(t,r,g.add,e,this.parentElement,this.template,this.templateChildCount)},ge=function(t,e,n,r){var i,a;c(this._elementMaps,function(o,u){var s=he(o);if(s)if(0===u.length)this.isArray&&pe(t,e,n,r,s.parentElement,s.template,s.templateChildCount);else{for(i=t,a=1;i&&a<u.length;a++)m(i)&&(i._elementMaps||(i._elementMaps={},i.on(g.add,ge),i.on(g.remove,ge),i.on(g.change,ge)),i._elementMaps[o]=u.slice(a)),i=v(i,u[a]);for(a!==u.length||n!==g.change&&n!==g.add||(m(i)?i.isArray&&(i._elementMaps||(i._elementMaps={},i.on(g.add,ge),i.on(g.remove,ge),i.on(g.change,ge)),i._elementMaps[o]=[],i.forEach(ve,s)):d(i)&&l(i,ve,s)),i=e,a=1;i&&a<u.length;a++)m(i)&&(o in i._elementMaps&&delete i._elementMaps[o],y(i._elementMaps)||(delete i._elementMaps,i.off(g.add,ge),i.off(g.remove,ge),i.off(g.change,ge))),i=v(i,u[a])}else delete this._elementMaps[o],y(this._elementMaps)||(delete this._elementMaps,this.off(g.add,ge),this.off(g.remove,ge),this.off(g.change,ge))},this)},me=function(t,e,n,a){for(var o,u,s=!1,l=n,c=i.createDocumentFragment(),f=0,h=a.firstChild;h;h=a.firstChild)1===h.nodeType||3===h.nodeType?(c.appendChild(h),f++):a.removeChild(h);if(0!==f){for(o=0;l&&o<e.length;o++)u=e[o],m(l)&&(s=!0,l._elementMaps||(l._elementMaps={},l.on(g.add,ge),l.on(g.remove,ge),l.on(g.change,ge)),l._elementMaps[t]=e.slice(o)),l=v(l,u);if(o===e.length)if(m(l))l.isArray&&(s=!0,l._elementMaps||(l._elementMaps={},l.on(g.add,ge),l.on(g.remove,ge),l.on(g.change,ge)),l._elementMaps[t]=[],l.forEach(function(t,e){pe(l.get(e),r,g.add,e,a,c,f)}));else if(d(l))for(o=0;o<l.length;o++)pe(l[o],r,g.add,o,a,c,f);s&&(this.id=t,this.template=c,this.parentElement=a,this.templateChildCount=f)}},ye=function(t,e,n,r){for(var i=ie(e),a=t,o=0;a&&o<i.length-1;o++)a=a[i[o]];if(a){var u=i[o];if(1===i.length&&q[u]){if(f(n)||s("Event '"+u+"' must bind to function."),r){var l=r[u];l&&B(t,u,l),r[u]=n}U(t,u,n)}else a[T[u]||u]=n}},be=function(t,e,n,r){var i,a,o,u;c(this._propertyMaps,function(s,l){i=se(s),i?c(l,function(l,c){if(1===c.length&&c[0]===r)ye(i.element,l,t,i.eventListeners);else if(c.length>1&&c[0]===r){for(a=t,o=1;a&&o<c.length;o++)m(a)&&(a._propertyMaps||(a._propertyMaps={},a.on(g.change,be),a.on(g.remove,be),a.on(g.add,be)),s in a._propertyMaps||(a._propertyMaps[s]={}),a._propertyMaps[s][l]=c.slice(o)),a=v(a,c[o]);for(o!==c.length||n!==g.change&&n!==g.add||ye(i.element,l,a,i.eventListeners),a=e,o=1;a&&o<c.length;o++)m(a)&&(u=a._propertyMaps[s],u&&delete u[l],y(u)||delete a._propertyMaps[s],y(a._propertyMaps)||(delete a._propertyMaps,a.off(g.change,be),a.off(g.remove,be),a.off(g.add,be))),a=v(a,c[o])}}):(delete this._propertyMaps[s],y(this._propertyMaps)||(delete this._propertyMaps,this.off(g.change,be),this.off(g.remove,be),this.off(g.add,be)))},this)},we=function(t,e,n){m(t)?t.set(e,n):h(t)&&(t[e]=n)},Ee=function(t,e,n){for(var r=t,i=0;r&&i<e.length-1;i++)r=v(r,e[i]);we(r,e[i],n)},Pe=function(e){e=e||t.event;var n=e.target||e.srcElement;if(n&&(3===n.nodeType&&(n=n.parentNode),ee(n,e))){var r=F(n),i=se(r);if(!i)return void te(n,e.type,Pe);var a=i.data;c(i.propertyBackMap,function(t,e){Ee(a,e,n[t])})}},xe=function(t,e,n,i,a){var o,u,s,l,f,h=!1,d=!1,p={};e&&c(e,function(e,n){for(o=i,u=!1,s=0;o&&s<n.length;s++)l=n[s],m(o)&&(u=!0,h=!0,o._propertyMaps||(o._propertyMaps={},o.on(g.change,be),o.on(g.remove,be),o.on(g.add,be)),t in o._propertyMaps||(o._propertyMaps[t]={}),o._propertyMaps[t][e]=n.slice(s)),o=v(o,l);s===n.length&&ye(a,e,o,u?p:r)}),n&&c(n,function(t,e){f=re(a,t),f&&(d=!0,f.add(a,Pe),Ee(i,e,a.value))}),h&&(this.element=a,this.eventListeners=p),d&&(this.data=i,this.propertyBackMap=n),(h||d)&&(V(a,t),this.id=t)},Ae=function(t,e,n){var i,a,o,u,l,c=!0,f=!1;if(1!==t.nodeType)return c;if(i=F(t),e===r){if(!i)return c;le(i),de(i),D(t)}else{if(i&&s("'element' already has data binding."),o=H(t),u=ae(o,n),o=N(t),l=ae(o,n),(u||l)&&(i=z(),a=new xe(i,u,l,e,t),a.id&&(ue(a),f=!0)),o=K(t)){var h=ie(o,!0);h||s("Each declaration '"+o+"' must be valid."),i=i||z(),a=new me(i,h,e,t),a.id&&(fe(a),f=!0),c=!1}f&&V(t,i)}return c},_e=function(t,e,n){l(t,function(t){1===t.nodeType&&Ce(t,e,n)})},Ce=function(t,e,n){var r=Ae(t,e,n);r&&t.hasChildNodes&&_e(t.childNodes,e,n)},Me=function(t,e){var n;if(t.nodeType)Ce(t,e);else if(p(t.length)){var r=t;if(r.length<1)return;if(arguments.length>1)for(n=0;n<r.length-1;n++)r[n].nextSibling!==r[n+1]&&s("When 'root' is a collection of DOM elements, the elements must be siblings under one parent node.");_e(r,e)}else s("'root' must be DOM element or collection of DOM sibling elements.")},Oe=function(t){Me(t,r)};n.bind=Me,n.unbind=Oe,a&&(a.fn.dataBind=function(t){return this.each(function(){Me(this,t)})},a.fn.dataUnbind=function(){return this.each(function(){Oe(this)})})}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=n._,a=i.trigger,o=i.listen,u=i.executeGlobalErrorFilters,s=i.isString,l=i.forEachItem,c=i.forEachKey,f=i.copyProperties,h=i.isObject,d=n.status,p=n.Area,v=n.Controller,g=n.Route,m=n.Filter,y="id",b=!1,w={areas:p,controllers:v,routes:g},E=function(e){n.on("request",function(t){var e=t.virtualPath,n=t.routeData;if(n){n.dataTokens.event=t;try{n.routeHandler(n,e)}catch(r){t.status=d.internalError,t.error=r,a("fail",t)}}else a("fail",t)}).on("fail",function(t){t.status=d.badRequest,t.error=new Error("Route cannot be found."),u(t)}),o(e),t&&a("request",n.current())},P=function(t){return e&&s(t)&&(t=e(t)),t=t||{},h(t)?(l(t.filters,function(t){m(t)}),c(w,function(e,n){c(t[e],function(t,e){r.call(e,y)||(e[y]=t),n(e)})}),f(P,t),b||(b=!0,E(t.ready)),n):n};n.config=P}(this.window,!this.window&&require,this.jsMVC||exports);