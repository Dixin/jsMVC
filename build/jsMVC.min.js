!function(t,e,n){"use strict";var r=Array.prototype.slice,i=t&&t.jsMVC,u=t&&t.jQuery,o=function(t){return o.config(t)};o.version=.8,o.noConflict=function(){return t&&t.jsMVC===o&&(t.jsMVC=i),o},"function"==typeof define&&define.amd&&define("jsMVC",[],function(){return o}),u&&(u.jsMVC=function(t){var e=o[t];return e?e.apply(n,r.call(arguments,1)):n}),t&&(t.jsMVC=o),e&&(exports=o,"undefined"!=typeof module&&module.exports&&(module.exports=o))}(this.window,!this.window&&require),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,u=Object.prototype.toString,o=Object.keys,a=Array.prototype.map,s=Array.prototype.some,l=Array.prototype.reduceRight,c=Array.prototype.indexOf,f=function(){},h=function(t){throw new Error(t)},d=function(t,e,n){var r,u;if(!t)return t;for(u=t.length,r=0;u>r&&(!i.call(t,r)||e.call(n,t[r],r,t)!==!1);r++);return t},p=a?function(t,e,n){return a.call(t,e,n)}:function(t,e,n){var r,i=new Array(t.length);for(r=0;r<i.length;r++)r in t&&(i[r]=e.call(n,t[r],r,t));return i},v=l?function(t,e,n){return l.call(t,e,n)}:function(t,e,n){var i,u,o,a=t.length,s=arguments.length>2;for(0!==a||s||h("Empty array must not be reduced with no initial value."),i=s?n:t[a-1],u=s?a-1:a-2,o=u;o>=0;o--)i=e.call(r,i,t[o],o,t);return i},g=s?function(t,e,n){return s.call(t,e,n)}:function(t,e,n){var r,u=t.length;for(r=0;u>r;r++)if(i.call(t,r)&&e.call(n,t[r],r,t))return!0;return!1},m=c?function(t,e){return c.call(t,e)}:function(t,e){var n,r=t.length;for(n=0;r>n;n++)if(t[n]===e)return n;return-1},y=function(t,e){var n,r=e.length,i=new Array(r);for(n=0;r>n;n++)i[n]=t[e[n]];return i},b=!{toString:null}.propertyIsEnumerable("toString"),w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],E=b.length,x=o?function(t,e,n){t&&d(o(t),function(r){return e.call(n,r,t[r],t)})}:b?function(t,e,n){var r,u;if(t){for(r in t)if(i.call(t,r)&&e.call(n,r,t[r],t)===!1)break;for(u=0;E>u&&(r=w[u],!i.call(t,r)||e.call(n,r,t[r],t)!==!1);u++);}}:function(t,e,n){var r;if(t)for(r in t)if(i.call(t,r)&&e.call(n,r,t[r],t)===!1)break},A=function(t,e,n){return x(e,function(e,r){!n&&e in t&&h("Key '"+e+"' must be unique."),t[e]=r}),t},P=function(t){var e,n=0;for(e in t)i.call(t,e)&&n++;return n},_=v(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(t,e){return t["[object "+e+"]"]=e.toLowerCase(),t},{}),C=function(t){switch(t){case null:return"null";case r:return"undefined";default:return _[u.call(t)]||"object"}},M=function(t){return"string"===C(t)},O=function(t){return"function"===C(t)},k=function(t){return"object"===C(t)},L=function(t){return!isNaN(parseInt(t,10))&&isFinite(t)},j=Array.isArray||function(t){return"array"===C(t)},q=function(t){return"number"===C(t)},T=function(t){return t&&t===t.window},S=function(){var t=function(){this.fns=[]};return t.prototype={constructor:t,push:function(t){return O(t)||h("'callback' must be function."),this.fns.push(t)},execute:function(t,e){var n=!1;return d(this.fns,function(r){r.apply(t,e),n=!0}),n},remove:function(t){return t===r?this.fns=[]:d(this.fns,function(e,n,r){return e===t?(r.splice(n,1),!1):!0}),this.fns.length}},t}(),R=function(){return!0},V=function(){return!1};n._={noop:f,error:h,forEachItem:d,indexOf:m,some:g,reduceRight:v,map:p,getArrayValues:y,forEachKey:x,copyProperties:A,countKeys:P,type:C,isString:M,isFunction:O,isObject:k,isInteger:L,isNumber:q,isArray:j,isWindow:T,Functions:S,returnTrue:R,returnFalse:V}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Array.prototype.slice,u=n._,o=u.Functions,a=u.returnTrue,s=u.returnFalse,l={},c=function(t,e){var r=l[t];return r||(r=l[t]=new o),r.push(e),n},f=function(t,e){var n=l[t];n&&0===n.remove(e)&&delete l[t]},h=function(t){var e=l[t];e&&e.execute(e,i.call(arguments,1))},d=function(){var t=function(){this.timeStamp=Date.now(),this.result=r};return t.prototype={constructor:t,isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,isErrorHandled:s,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a,this.isImmediatePropagationStopped=a},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a},handleError:function(){this.isErrorHandled=a}},t}();n.event=d.prototype,n.on=c,n.off=f,u.Event=d,u.trigger=h}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,u=n._,o=u.noop,a=u.error,s=u.forEachKey,l=u.some,c=u.isString,f=u.isFunction,h=u.isObject,d=(u.copyProperties,"separator"),p="content",v="literal",g="parameter",m="/",y="*",b="{",w="}",E="{{",x="}}",A="",P=function(t){var e=t.replace(E,A).replace(x,A);return-1!==e.indexOf(b)||-1!==e.indexOf(w)?null:t.replace(E,b).replace(x,w)},_=function(t){var e,n;if(0===t.length)return!1;for(e=0;e<t.length;e++)if(n=t[e],n===m||n===b||n===w)return!1;return!0},C=function(t,e){for(;;){if(e=t.indexOf(b,e),-1===e)return-1;if(e+1===t.length||e+1<t.length&&t.charAt(e+1)!==b)return e;e+=2}},M=function(t){this.isCatchAll=!1,t.charAt(0)===y&&(t=t.substr(1),this.isCatchAll=!0),this.type=g,this.value=t},O=function(t){for(var e,n,r,i,u,o=0,a=[];o<t.length;){if(e=C(t,o),-1===e){if(n=P(t.substr(o)),null===n)return null;n.length>0&&a.push({type:v,value:n});break}if(r=t.indexOf(w,e+1),-1===r)return null;if(i=P(t.substr(o,e-o)),null===i)return null;i.length>0&&a.push({type:v,value:i}),u=t.substr(e+1,r-e-1),a.push(new M(u)),o=r+1}return a},k=function(t){var e,n,r,i,u=[];if(!t||0===t.length)return u;for(e=0;e<t.length;){if(n=t.indexOf(m,e),-1===n){i=t.substring(e),i.length>0&&u.push(i);break}r=t.substr(e,n-e),r.length>0&&u.push(r),u.push(m),e=n+1}return u},L=function(t){var e,n,r,i,u=[];for(e=0;e<t.length;++e)n=t[e],r=n===m,r?u.push({type:d,value:m}):(i=O(n),u.push({type:p,value:i}));return u},j=function(t){return l(t.value,function(t){return t.type===g&&t.isCatchAll})},q=function(t,e){var n,r,i,u,o,a=!1;for(r=0;r<t.length;++r){if(i=t[r],n===i.type)return!1;if(n=i.type,i.type!==v){if(i.type!==g)return!1;if(u=i,o=u.value,u.isCatchAll&&(a=!0),!_(o))return!1;if(e[o])return!1;e[o]=u}}return a&&1!==t.length?!1:!0},T=function(t){return t.isCatchAll===!0},S=function(t){var e,n,r,i,u={},o=null,a=!1;for(e=0;e<t.length;++e){if(n=t[e],a)return!1;if(null===o)o=n===m,r=o;else{if(r=n===m,r&&o)return!1;o=r}if(!r){if(i=O(n),null===i)return!1;if(!q(i,u))return!1;a=l(i,T)}}return!0},R=function(t){var e,n;return t||(t=A),t[0]===m||-1!==t.indexOf("?")?null:(e=k(t),S(e)?n=L(e):null)},V=function(t){var e;return t?(h(t)||a("'values' must be plain object."),e={},s(t,function(t,n){t=t.toLowerCase(),i.call(e,t)&&a("Keys of 'values' must be case-insensitively unique."),e[t]=n}),e):{}},D=function(t,e,n,r){var i,u=e.join(A),o=t.value[0];i=u.length>0?u:n[o.value],r[o.value]=i},I=function(t,e,n,r){var u,o,a,s,l,c,f,h,d,p,m,y,b,w;if(!e)return t.value.length>1?!1:(u=t.value[0],u.type!==g?!1:i.call(n,u.value)?(o=n[u.value],r[u.value]=o,!0):!1);for(a=e.length,s=t.value.length-1,l=null,c=null;s>=0;){if(f=a,h=null,t.value[s]&&t.value[s].type===g)h=t.value[s],l=h;else{if(!t.value[s]||t.value[s].type!==v)return!1;if(d=t.value[s],c=d,m=a-1,null!==l&&m--,0>m)return!1;if(p=e.lastIndexOf(d.value,m),-1===p)return!1;if(s===t.value.length-1&&p+d.value.length!==e.length)return!1;f=p}if(null!==l&&(null!==c&&null===h||0===s)){if(null===c?(y=0===s?0:f+c.value.length,b=a):0===s&&null!==h?(y=0,b=a):(y=f+c.value.length,b=a-y),w=e.substr(y,b),!w)return!1;r[l.value]=w,l=null,c=null}a=f,s--}return 0===a||t.value[0]&&"parameter"===t.value[0].type},F=function(t,e,n){var r,u,o,a,l,c=k(e),f={},h=!1,v=!1;for(n||(n={}),r=0;r<t.length;r++)if(u=t[r],c.length<=r&&(h=!0),o=h?null:c[r],u&&u.type===d){if(!h&&o!==m)return null}else{if(a=u,!a||a.type!==p)return null;if(j(a))D(a,c.slice(r),n,f),v=!0;else if(!I(a,o,n,f))return null}if(!v&&t.length<c.length)for(l=t.length;l<c.length;l++)if(c[l]!==m)return null;return null!==n&&s(n,function(t,e){i.call(f,t)||(f[t]=e)}),f},H=function(t,e){var n,r,i,u,o,a;for(n=0;n<t.length;n++)if(r=t[n],r.type!==d){if(r.type!==p)return!1;for(i=r,u=0;u<i.value.length;++u)if(o=i.value[u],o.type!==v){if(a=o,null===a)return!1;if(!e(a))return!1}}return!0},N=function(t,e){var n=null;return H(t,function(t){return e===t.value?(n=t,!1):!0}),n},U=function(t,e){return t.isCatchAll?{isRequired:!1,defaultValue:r}:{isRequired:!i.call(e,t.value),defaultValue:e[t.value]}},K=function(t){return c(t)?t.length>0:!!t},B=function(t,e){return c(t)&&c(e)?t===e:null!==t&&t!==r&&null!==e&&e!==r?t.toString()===e.toString():t===e},$=t?function(t){return t}:encodeURIComponent,z=t?function(t){return t}:e("querystring").escape,W=function(t,e,n,r,u){e=e||{},n=n||{},r=r||{};var o,a,l,c,f,h,y,b,w,E,x,P,_,C,M,O,k,L,j,q,T,S,R,D,I,F,W={},X={};if(s(n,function(t){X[t]=null}),H(t,function(t){return o=t.value,a=n[o],l=i.call(n,o),l&&delete X[o],c=e[o],f=i.call(e,o),l&&f&&!B(c,a)?!1:(l?K(a)&&(W[o]=a):f&&(W[o]=c),!0)}),s(n,function(t,e){K(e)&&(i.call(W,t)||(W[t]=e))}),s(e,function(e,n){h=e,i.call(W,h)||(y=N(t,h),null===y&&(W[h]=n.Value))}),H(t,function(t){return i.call(W,t.value)||(b=U(t,r),b.isRequired||(W[t.value]=b.defaultValue)),!0}),w=H(t,function(t){var e=U(t,r);return e.isRequired&&!i.call(W,t.value)?!1:!0}),!w)return null;if(E=V(r),H(t,function(t){return delete E[t.value],!0}),x=!1,s(E,function(t,e){return i.call(n,t)&&(delete X[t],!B(n[t],e))?(x=!0,!1):!0}),x)return null;for(P=A,_=A,C=!1,M=0;M<t.length;M++)if(k=t[M],k.type===d){if(C&&_.length>0&&(P+=_,_=A),C=!1,_.length>0&&_[_.length-1]===m)return null;_+=m}else{if(k.type!==p)return null;for(L=k,j=!1,O=0;O<L.value.length;++O)if(q=L.value[O],q.type===v)T=q,C=!0,_+=$(T.value);else{if(q.type!==g)return null;S=q,C&&_.length>0&&(P+=_,_=A,j=!0),C=!1,R=W[S.value],D=i.call(W,S.value),D&&delete X[S.value],I=r[S.value],B(R,I)?_+=$(R?R.toString():A):(_.length>0&&(P+=_,_=A),P+=$(R?R.toString():A),j=!0)}j&&_.length>0&&(P+=_,_=A)}return C&&_.length>0&&(P+=_),u&&s(u,function(t){delete X[t]}),X&&(F=!0,s(X,function(t){i.call(W,t)&&(P+=F?"?":"&",F=!1,P+=z(t),P+="=",P+=z(W[t].toString()))})),{url:P,values:W}},X=function(t,e,n,r){this.route=t,this.routeHandler=e,this.values=n,this.dataTokens=r},G=function(t,e,n){this.route=t,this.virtualPath=e,this.dataTokens=n},Q=function(t,e,n,r,i,u){var o,s,l=i[r];return f(e)?e(l,n,t,r,i,u):(c(e)||a("'constraint' must be function or string"),o=l.toString(),s=new RegExp("^("+e+")$","i"),o.match(s))},J=function(t,e,n,r,i){var u=!0;return s(e,function(e,o){return Q(t,o,n,e,r,i)?!0:(u=!1,!1)}),u},Y=function(){var t=function(t,e,n,r,i,u){c(t)||a("'url' must be valid."),t=t.toLowerCase(),this._segments=R(t),null===this._segments&&a("'url' must be valid."),i?f(i)||a("'routeHandler' must be valid."):i=o,u&&!c(u)&&a("'name' must be string or empty."),this.url=t,this.routeHandler=i,this.defaults=V(e),this.constraints=V(n),this.dataTokens=V(r),this.name=u};return t.prototype={constructor:t,getVirtualPathData:function(t,e){t=V(t),e=V(e);var n,r=W(this._segments,e,t,this.defaults,this.constraints);return null===r?null:J(this,this.constraints,r.url,r.values,!1)?n=new G(this,r.url,V(this.dataTokens)):null},getRouteData:function(t){c(t)||a("'virtualPath' must be string."),t=t.toLowerCase();var e,n=F(this._segments,t,this.defaults);return null===n?null:J(this,this.constraints,t,n,!0)?e=new X(this,this.routeHandler,V(n),V(this.dataTokens)):null}},t}(),Z=function(){var t=function(t,e){Y.call(this,t,{},e,{},o)};return t.prototype={constructor:t,getVirtualPathData:function(){return null},getRouteData:Y.prototype.getRouteData},t}(),te=function(){var t,e={},n=[];this.getRouteData=function(e){for(c(e)||a("'virtualPath' must be string."),e=e.toLowerCase(),t=0;t<n.length;++t){var r=n[t].getRouteData(e);if(r)return r}return null},this.getVirtualPathData=function(t,e,r){r&&!f(r)&&a("'filter' must be function.");var i,u,o;for(i=0;i<n.length;++i)if(u=n[i],(!r||r(u))&&(o=u.getVirtualPathData(t,e)))return o;return null},this.push=function(t){if(t.constructor!==Y&&t.constructor!==Z&&a("'route' must be valid."),t.name){var r=t.name.toLowerCase();i.call(e,r)&&a("'name' must be unique."),e[r]=t}return n.push(t),t},this.get=function(t){if(c(t)){var r=t.toLowerCase();return e[r]}return n[t]},this.ignore=function(t,e){return this.push(new Z(t,e))},this.clear=function(){e={},n=[]},this.length=function(){return n.length},this.Route=function(t,e,n,r,i,u){return new Y(t,e,n,r,i,u)}};n.routeTable=new te,u.getUrlParts=k,u.getSegmentLiteral=P,u.getIndexOfFirstOpenParameter=C,u.getUrlSubsegments=O,u.isUrlSubsegmentsValid=q,u.isUrlPartsValid=S,u.matchSegments=F,u.getParsedSegments=R,u.forEachParameterSubsegment=H,u.encodeUrl=$,u.escapeUrlDataString=z}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";if(t){var r,i=t.location,u=t.history,o=t.document,a=o.documentMode,s=n._,l=s.error,c=s.type,f=s.trigger,h=s.Event,d=s.copyProperties,p=s.isFunction,v=n.routeTable,g='<iframe tabindex="-1" style="display: none; visibility: hidden;" src="javascript:0"></iframe>',m="#",y="!",b=y.length,w="hashchange",E="on"+w,x="?",A=i.href,P=function(t){return t.replace(/^[^#]*#?(.*)$/,"$1")},_=function(t){0===t.indexOf(m)&&(t=t.substr(1)),0===t.indexOf(y)&&(t=t.substr(b)),t=y+t,i.hash=t},C=function(t){var e,n,u,o=new h;return t=t||{},r=i.href,e=u=t.newHash||P(r),e.substr(0,b)===y&&(e=e.substr(b)),n=e.indexOf(x),n>=0&&(e=e.slice(0,n)),d(o,{type:t.type||w,timeStamp:t.timeStamp||o.timeStamp,target:t.target,currentTarget:t.currentTarget,virtualPath:e,routeData:v.getRouteData(e),newHref:t.newURL||r,oldHref:t.oldURL||A,newHash:u,oldHash:t.oldHash||P(A),request:null,response:null,serverDomain:null,requestDomain:null},!0),A=r,o},M=function(e){var n,u,s,c="onreadystatechange",h="onload",d=function(e){f("request",C(e||t.event))};E in t&&t.addEventListener?t.addEventListener(w,d,!1):t.attachEvent?E in t&&a&&a>7?t.attachEvent(E,d):c in o&&(n=function(){var e,n,u,a=o.createElement(g),l=function(){a.detachEvent(h,l),t.setInterval(function(){r=i.href,A!==r?(s.document.title=o.title,s.document.open(),s.document.close(),s.location.hash=P(r),n=s.location.href,f("request",C({target:t,currentTarget:s}))):(e=s.location.href,n!==e&&(n=e,i.hash=P(e),r=i.href,f("request",C({target:s,currentTarget:s}))))},100)};a.attachEvent("onload",l),u=t.document.body,u.parentNode.insertBefore(a,u.nextSibling),s=a.contentWindow,n=s.location.href},u=function(){"complete"===o.readyState&&(o.detachEvent(c,u),n())},"complete"===o.readyState?n():o.attachEvent(c,u)):l("Please upgrade browser to latest version."),p(e)&&e(C())},O=function(t,e){var n,r,o=i.href;switch(e=e||{},c(t)){case"number":return u.go(t),i.href!==o;case"string":return _(t),i.href!==o;case"object":return r=C().routeData,n=v.getVirtualPathData(t,r?r.values:{},e.filter),n?(_(n.virtualPath),i.href!==o):!1;default:return!1}};n.go=O,n.current=C,s.listen=M}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";if(!t){var i=n._,u=i.trigger,o=i.copyProperties,a=i.Event,s=i.type,l=i.isFunction,c=n.routeTable,f=n.status,h=e("http"),d=e("url"),p=e("domain"),v="/",g=v.length,m=null,y=null,b=function(t){var e,n,i,u,s=new a,l=global.process,f=l.domain,h=f._jsMVC;return t=t||{},h?(e=h.request,n=d.parse(t.newHref||e.url),i=t.virtualPath||n.pathname,u=t.referrerUrl||e.headers.referer||e.headers.Referer,n.protocol=e.connection.encrypted?"https":"http",n.host=e.headers.host,u=u!==r?d.parse(u):{},i&&i.substr(0,g)===v&&(i=i.substr(g)),o(s,{type:e.method,target:m,currentTarget:m,virtualPath:i,routeData:i?c.getRouteData(i):null,newHref:d.format(n),oldHref:u.href,newHash:n.hash,oldHash:u.hash,request:e,response:h.response,serverDomain:y,requestDomain:f})):o(s,{type:null,target:m,currentTarget:m,virtualPath:null,routeData:null,newHref:null,oldHref:null,newHash:null,oldHash:null,request:null,response:null,serverDomain:y,requestDomain:null})},w=function(t){y=p.create(),y.run(function(){m=h.createServer().on("request",function(t,e){var n=p.create();n.add(t),n.add(e),n._jsMVC={request:t,response:e},n.on("error",function(t){try{var r=b();r.status=f.internalError,r.error=t,u("fail",r),e.on("close",function(){n.dispose()})}catch(i){n.dispose()}}),n.run(function(){u("request",b())})}),l(t)&&t(b())})};n.go=function(t,e){var n;switch(e=e||{},s(t)){case"string":return u("request",b({newHref:t})),!0;case"object":return n=c.getVirtualPathData(t,{},e.filter),n?(u("request",b(o({virtualPath:n.virtualPath},e))),!0):!1;default:return!1}},n.current=b,i.listen=w}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,u=n.routeTable,o=u.Route,a=n._,s=a.error,l=a.isString,c=a.isFunction,f=a.isInteger,h=a.forEachItem,d=a.forEachKey,p=(a.copyProperties,a.some),v=a.reduceRight,g=a.map,m=a.Event,y=a.returnFalse,b="/",w="",E={notFound:404,internalError:500,badRequest:400,ok:200},x="error",A="beforeAction",P="afterAction",_="authorize",C=10,M=0,O="id",k=function(t,e){return e&&(t===r||t===w)||l(t)&&-1===t.indexOf(b)&&t!==w},L=function(t,e){return k(t,e)||s(e?"Route value must be valid.":"Route value must be valid and not empty."),t?t.toLowerCase():t},j=function(t,e){return(e?e+b:w)+L(t)},q=function(){var t=function(){this.items={}};return t.prototype={constructor:t,push:function(t,e){var n=t.toLowerCase();return i.call(this.items,n)&&s("Key '"+t+"' must be unique."),this.items[n]=e,e},get:function(t){return this.items[t.toLowerCase()]},has:function(t,e){return t=t.toLowerCase(),arguments.length>1?this.items[t]===e:i.call(this.items,t)}},t}(),T=function(){var t=function(t,e){this.isOrderRequired=t,this.items=e||[],t&&this.items.length>1&&this.sort()};return t.prototype={constructor:t,sort:function(t){t=t||function(t,e){return t.order-e.order},this.items.sort(t)},push:function(t){return this.isOrderRequired&&!f(t.order)&&s("'order' must be integer."),this.items.push(t),this.isOrderRequired&&this.sort(),t},get:function(t){return this.items[t]},has:function(t){for(var e=0;e<this.items.length;e++)if(t===this.items[e])return!0;return!1},toArray:function(){return this.items.slice()},forEach:function(t,e){h(this.items,t,e)},map:function(t,e){return new T(this.isOrderRequired,g(this.items,t,e))},reverse:function(){return new T(this.isOrderRequired,this.items.reverse())},reduceRight:function(t,e){return v(this.items,t,e)},some:function(t,e){return p(this.items,t,e)},length:function(){return this.items.length}},t}(),S=new q,R=new q,V=new q,D=new T(!0),I=function(t,e,n,r,i){t&&!c(t)&&s("'authorize' must be empty or function."),e&&!c(e)&&s("'beforeAction' must be empty or function."),n&&!c(n)&&s("'afterAction' must be empty or function."),r&&!c(r)&&s("'fail' must be empty or function."),this[_]=t,this[A]=e,this[P]=n,this[x]=r,this.order=parseInt(i,C)||M,f(this.order)||s("'order' must be integer or undefined.")},F=function(t){var e,n=new T(!0);return h(t,function(t){e=new I(t[_],t[A],t[P],t[x],t.order),n.push(e)}),n},H=function(t,e){var n=t.result,i=e(t);return i!==r?(t.result=i,!0):(t.result=n,!1)},N=function(t,e,n){var r;t.isPropagationStopped()||(t.isImmediatePropagationStopped=y,h(e,function(e){return t.isImmediatePropagationStopped()?!1:(e&&e.forEach(function(e){return t.isImmediatePropagationStopped()?!1:(r=e[n],r&&H(t,r),!0)}),!0)}))},U=function(t,e){var n;h(e,function(e){return t.isErrorHandled()?!1:(e&&e.forEach(function(e){return t.isErrorHandled()?!1:(n=e[x],n&&H(t,n),!0)}),!0)})},K=function(t){var e=new I(t[_],t[A],t[P],t[x],t.order),n=t.target;n?n.filters?n.filters.push(e):s("'target' must be valid area, controller, or action."):D.push(e)},B=function(){return D.toArray()},$=function(){var t=function(t,e,n,r){t&&R.has(t.virtualPath,t)||s("'controller' must be valid."),e=L(e),c(n)||s("'execute' must be function."),this.controller=t,this[O]=e,this.execute=n,this.filters=r,this.virtualPath=j(e,t.virtualPath)};return t.prototype={constructor:t,Filter:function(t){return t.target=this,K(t)},getFilters:function(){return this.filters.toArray()}},t}(),z=function(t){var e,n=F(t.filters);return c(t)&&(t={controller:t.controller,execute:t},t[O]=t.actionId),e=new $(t.controller,t[O],t.execute,n),V.push(e.virtualPath,e)},W=function(){var t=function(t,e,n){t=L(t),e&&!S.has(e.virtualPath,e)&&s("'area' must be valid or empty."),this[O]=t,this.area=e,this.virtualPath=j(t,e?e.virtualPath:r),this.filters=n};return t.prototype={constructor:t,Action:function(t){return t.controller=this,z(t)},Filter:function(t){return t.target=this,K(t)},getAction:function(t){return V.get(j(t,this.virtualPath))},getFilters:function(){return this.filters.toArray()}},t}(),X=function(t,e){return c(t)&&(t={execute:t}),i.call(t,O)||(t[O]=e),t},G=function(t){var e,n;return!t.area&&t.areaId&&(t.area=S.get(t.areaId)),e=F(t.filters),n=new W(t[O],t.area,e),R.push(n.virtualPath,n),d(t.actions,function(t,e){e=X(e,t),n.Action(e)}),n},Q=function(t){return R.get(t)},J=function(){var t=function(t,e){this.virtualPath=this[O]=L(t),this.filters=e};return t.prototype={constructor:t,Route:function(t){return t.areaId=this[O],ie(t)},Controller:function(t){return t.area=this,G(t)},Filter:function(t){return t.target=this,K(t)},getController:function(t){return R.get(j(t,this.virtualPath))},getFilters:function(){return this.filters.toArray()}},t}(),Y=function(t){var e=F(t.filters),n=new J(t[O],e);return S.push(n.virtualPath,n),d(t.controllers,function(t,e){i.call(e,O)||(e[O]=t),n.Controller(e)}),d(t.routes,function(t,e){i.call(e,O)||(e[O]=t),n.Route(e)}),n},Z=function(t){return S.get(t)},te=function(t,e){e&&c(e.execute)&&e.execute(t)},ee=function(t,e,n,r){if(t.status=n,t.error=e,U(t,r),!t.isErrorHandled())throw e;return te(t,t.result)},ne=function(t,e,n,r,i){var u,o,a,s=t.dataTokens.event||new m;delete t.dataTokens.event;try{s.actionId=L(n),s.controllerId=L(r),s.areaId=L(i,!0)}catch(l){return ee(s,l,E.badRequest,[D])}if(u=V.get(j(n,j(r,i))),!u)return ee(s,new Error("Action cannot be found."),E.notFound,[D]);s.actionVirtualPath=u.virtualPath,s.action=u,s.controller=u.controller,s.area=u.controller.area,o=[D,s.area?s.area.filters:null,s.controller.filters,s.action.filters],a=[s.action.filters.reverse(),s.controller.filters.reverse(),s.area?s.area.filters.reverse():null,D.reverse()];try{return N(s,o,_),N(s,o,A),s.isDefaultPrevented()||H(s,u.execute),N(s,a,P),te(s,s.result)}catch(c){return ee(s,c,s.status||E.internalError,o)}},re=function(t,e){ne(t,e,t.values.action,t.values.controller,t.dataTokens.area)},ie=function(t){t.areaId&&(t.dataTokens=t.dataTokens||{},t.dataTokens.area=L(t.areaId));var e=new o(t.url,t.defaults,t.constraints,t.dataTokens,re,t[O]);return u.push(e)};n.Route=ie,n.Area=Y,n.Controller=G,n.Filter=K,n.getArea=Z,n.getController=Q,n.getFilters=B,n.status=E,a.executeGlobalErrorFilters=function(t){U(t,[D])}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";var r=n._,i=r.noop,u=function(){var t=function(){};return t.prototype={constructor:t,execute:i},t}();n.event.EmptyResult=function(){return new u}}(this.window,!this.window&&require,this.jsMVC||exports),function(t){"use strict"}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";if(!t){var r=n._.isString,i=e("fs"),u=e("path"),o=".",a=o.length,s={css:"text/css",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",js:"application/javascript"},l=function(t){var e=u.extname(t);return 0===e.indexOf(o)&&(e=e.substr(a)),s[e.toLowerCase()]},c=n.status,f=function(t){t.writeHead(c.notFound),t.end()},h=function(t,e){return r(e)||(e=n.config.appPath),r(e)?u.resolve(e,t):t},d=function(){var t=function(t,e,n){this.event=t,this.filePath=h(e,n)};return t.prototype={constructor:t,execute:function(){var t=this.event.response,e=this.filePath,n=l(e);n?i.readFile(e,function(e,r){e?f(t):(t.writeHead(c.ok,{"Content-Type":n,"Content-Length":r.length}),t.end(r))}):f(t)}},t}();n.event.FileResult=function(t,e){return new d(this,t,e)}}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";var i=Object.prototype.hasOwnProperty,u=n._,o=u.error,a=u.forEachItem,s=u.forEachKey,l=u.copyProperties,c=u.isFunction,f=u.isObject,h=u.isArray,d=u.isString,p=u.indexOf,v=u.getArrayValues,g=u.countKeys,m={change:"change",add:"add",remove:"remove"},y=function(t,e,n,r,i){a(t._eventListeners[e],function(u){u.call(t,n,r,e,i)}),arguments.length>4&&a(t._keyListeners[e][i],function(u){u.call(t,n,r,e,i)})},b=function(t,e,n,r){var u=t._keyListeners[e];i.call(u,r)||(u[r]=[]),u[r].push(n)},w=function(t,e,n){t._eventListeners[e].push(n)},E=function(t,e){s(t._keyListeners,function(n){t._keyListeners[n][e]=[]})},x=function(t,e,n){var r=t._keyListeners[e];r&&n in r&&(r[n]=[])},A=function(t,e,n){var r,i=t._eventListeners[e];if(i)for(r=0;r<i.length;r++)i[r]===n?i.splice(r,1):r++},P=function(t,e){var n=t._eventListeners;e in n&&(n[e]=[])},_=function(t,e,n,r){var i,u,o=t._keyListeners[e];if(o&&(i=o[r]))for(u=0;u<i.length;)i[u]===n?i.splice(u,1):u++},C=function(t,e){var n;s(t._eventListeners,function(t,r){for(n=0;n<r.length;)r[n]===e?r.splice(n,1):n++}),s(t._keyListeners,function(t,r){s(r,function(t,r){for(n=0;n<r.length;)r[n]===e?r.splice(n,1):n++})})},M=function(){var t=function(t,e){this.isArray=h(t),this.isArray||f(t)||o("'data' must be object or array."),this.data=e?this.isArray?t.slice():l({},t):t;var n=this;this._eventListeners={},s(m,function(t){n._eventListeners[t]=[]}),this._keyListeners={},s(m,function(t){n._keyListeners[t]={}})};return t.prototype={constructor:t,length:function(){return this.isArray?this.data.length:g(this.data)},get:function(t){return this.data[t]},set:function(t,e){i.call(this.data,t)||o("Key or index '"+t+"' must be existing.");var n=this.data[t];return n!==e&&(this.data[t]=e,y(this,m.change,e,n,t)),this},add:function(){var t,e,n,u,a=arguments,s=a.length;return 2>s?(this.isArray||o("Key and Value must be provided for object."),t=this.data.length,e=a[0],this.data.push(e)):2===s?(this.isArray&&o("Key must not be provided for array."),t=a[0],i.call(this.data,t)&&o("Key '"+t+"' must be unique."),e=a[1],this.data[t]=e):(this.isArray&&o("Dependency must be used for object."),t=a[0],n=a[1],u=a[2],e=n.apply(this,v(this.data,u)),this.data[t]=e,this.on(m.change,function(e,r,i,o){p(u,o)>=0&&this.set(t,n.apply(this,v(this.data,u)))})),y(this,m.add,e,r,t),this},push:function(t){return this.add(t)},pop:function(){this.isArray||o("Popping an item must be used for array.");var t=this.data[this.data.length-1];return this.removeAt(this.data.length-1),t},addAt:function(t,e){return this.isArray||o("Adding item at an index must be used for array."),t>this.data.length&&o("'index' must not be greater than array's length"),this.data.splice(t,0,e),y(this,m.add,e,r,t),this},remove:function(){var t,e,n=arguments;if(this.isArray){for(e=n[0],t=0;t<this.data.length;t++)if(this.data[t]===e){this.data.splice(t,1),y(this,m.remove,r,e,t),E(this,t);break}}else t=n[0],e=this.data[t],delete this.data[t],y(this,m.remove,r,e,t),E(this,t);return this},removeAll:function(t){var e;if(this.isArray){if(arguments.length<1)for(t=[],e=this.data.length-1;e>=0;e--)t.push(e);else t.sort(function(t,e){return e-t});a(t,this.removeAt)}else arguments.length<1&&(t=[],s(this.data,function(e){t.push(e)})),a(t,this.remove)},removeAt:function(t){this.isArray||o("Removing item at an index must be used for array."),t>this.data.length&&o("'index' must not be out of array's range.");var e=this.data[t];this.data.splice(t,1),y(this,m.remove,r,e,t),E(this,t)},on:function(t,e,n){if(arguments.length<3){if(d(t))return w(this,t.toLowerCase(),e),this;n=e,e=t,t=m.change}return b(this,t.toLowerCase(),e,n),this},off:function(){var t,e,n=arguments,r=n[0];return c(r)?(C(this,r),this):(e=r.toLowerCase(),n.length>2?(r=n[1],t=n[2],_(this,e,r,t)):2===n.length?(r=n[1],c(r)?A(this,e,r):(t=r,x(this,e,t))):P(this,e),this)},forEach:function(t,e){arguments.length<2&&(e=this),this.isArray?a(this.data,t,e):s(this.data,t,e)},sort:function(t){this.isArray||o("Sorting must be used for array.");var e=this.data;this.removeAll(),e.sort(t),a(e,this.push)},reverse:function(){this.isArray||o("Reversing must be used for array.");var t=this.data;this.removeAll(),t.reverse(),a(t,this.push)}},t}(),O=function(t){return t&&t.constructor===M},k=function(t,e){return O(t)?t.get(e):t[e]};n.Observable=function(t){return new M(t)},n.Observable.eventTypes=m,n.isObservable=O,u.getValue=k}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n,r){"use strict";if(t){var i=t.document,u=t.jQuery,o=n._,a=o.noop,s=o.error,l=o.forEachItem,c=o.forEachKey,f=o.isFunction,h=o.isObject,d=o.isArray,p=o.isNumber,v=o.getValue,g=n.Observable.eventTypes,m=n.isObservable,y=function(t){var e=!1;return c(t,function(){return e=!0,!1}),e},b=String.prototype.trim,w=b?function(t){return b.call(t)}:function(t){return t.replace(/^\s+|\s+$/g,"")},E={element:1,text:3},x=i.createElement("div"),A="data-",P="bind",_="each",C="bindback",M=A+P,O=A+_,k=A+C,L=";",j=":",q=".",T={blur:!0,change:!0,click:!0,contextmenu:!0,copy:!0,cut:!0,dbclick:!0,error:!0,focus:!0,focusin:!0,focusout:!0,hashchange:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,mousewheel:!0,paste:!0,reset:!0,resize:!0,scroll:!0,select:!0,submit:!0,textinput:!0,unload:!0,wheel:!0},S=function(){var t={};return x.textContent===r&&x.innerText!==r?t.textContent="innerText":x.innerText===r&&x.textContent!==r&&(t.innerText="textContent"),t}(),R="on",V="jsdatabindid",D=A+V,I=x.dataset?function(t,e){t.dataset[V]=e}:function(t,e){t.setAttribute(D,e)},F=function(t){return t.getAttribute(D)},H=function(t){t.removeAttribute(D)},N=x.dataset?function(t){return t.dataset[P]}:function(t){return t.getAttribute(M)},U=x.dataset?function(t){return t.dataset[C]}:function(t){return t.getAttribute(k)},K=x.dataset?function(t){return t.dataset[_]}:function(t){return t.getAttribute(O)},B=t.addEventListener?function(t,e,n){l(w(e).split(/\s+/),function(e){t.addEventListener(e,n,!1)})}:t.attachEvent?function(t,e,n){l(w(e).split(/\s+/),function(e){t.attachEvent(R+e,n)})}:a,$=t.removeEventListener?function(t,e,n){l(w(e).split(/\s+/),function(e){t.removeEventListener(e,n,!1)})}:t.detachEvent?function(t,e,n){l(w(e).split(/\s+/),function(e){t.detachEvent(R+e,n)})}:a,z=0,W=function(){return++z},X=/(\[\d+\])/g,G=".$1",Q=function(t){return t=w(t).replace(X,G),t.length>0?t:null},J=/^\[\d+\]$/,Y="this",Z={add:function(t,e){B(t,"change",e)},remove:function(t,e){$(t,"change",e)}},te=function(){return t.ActiveXObject?9===i.documentMode?{add:function(t,e){l(["propertychange","keyup"],function(n){t.attachEvent(R+n,e)})},remove:function(t,e){l(["propertychange","keyup"],function(n){t.detachEvent(R+n,e)})}}:{add:function(t,e){t.attachEvent(R+"propertychange",e)},remove:function(t,e){t.detachEvent(R+"propertychange",e)}}:{add:function(t,e){l(["input","blur"],function(n){t.addEventListener(n,e,!1)})},remove:function(t,e){l(["input","blur"],function(n){t.removeEventListener(n,e,!1)})}}}(),ee=t.ActiveXObject?function(t,e,n){switch(e){case"propertychange":case"keyup":t.detachEvent(R+e,n);default:$(t,e,n)}}:$,ne=function(t,e){switch(e.type){case"propertychange":return"value"===e.propertyName;case"keyup":case"change":case"input":case"blur":var n=t.tagName,r=re[n];return"INPUT"===n&&(r=r[t.type]),r;default:return!1}},re={TEXTAREA:{value:Z},OUTPUT:{value:Z},SELECT:{selectedIndex:Z},OPTION:{selected:Z},INPUT:{radio:{checked:Z},checkbox:{checked:Z},text:{value:te},password:{value:te},color:{value:Z},date:{value:Z},datetime:{value:Z},"datetime-local":{value:Z},email:{value:Z},month:{value:Z},number:{value:Z},range:{value:Z},search:{value:Z},tel:{value:Z},time:{value:Z},url:{value:Z},week:{value:Z}}},ie=function(t,e){var n=t.tagName,r=re[n];return r&&("INPUT"!==n||(r=r[t.type]))?r[e]:null},ue=function(t,e){if(e&&(t=Q(t)),!t)return null;var n=t.split(q);return n[0]===Y&&(n=n.slice(1)),l(n,function(t,e){J.test(t)&&(n[e]=parseInt(t.substring(1,t.length-1),10))
}),n},oe=function(t,e){var n;if(!t)return null;t=t.split(L);for(var r={},i=0;i<t.length;i++){var u=t[i].split(j);2!==u.length&&s("Bind declaration '"+u+"' must be valid.");var o=Q(u[0]);o||s("Element path of bind declaration '"+u+"' must be valid."),n=ue(u[1],!0),n||s("Data path of bind declaration '"+u+"' must be valid."),e&&(n=e.concat(n)),r[o]=n}return i>0?r:null},ae={},se=function(t){var e=t.id;e in ae&&s("Property binding (id: "+e+") must has unique id."),ae[e]=t},le=function(t){return ae[t]},ce=function(t){var e=le(t);e&&(e.eventListeners&&(c(e.eventListeners,function(t,n){$(e.element,t,n),delete e.eventListeners[t]}),delete e.eventListeners),e.propertyBackMap&&(c(e.propertyBackMap,function(t){var n=ie(e.element,t);n.remove(e.element,Ae),delete e.propertyBackMap[t]}),delete e.propertyBackMap),delete e.data,delete e.element,delete e.id,delete ae[t])},fe={},he=function(t){var e=t.id;e in fe&&s("Element binding (id: "+e+") must has unique id."),fe[e]=t},de=function(t){return fe[t]},pe=function(t){var e=de(t);e&&(delete e.id,delete e.template,delete e.parentElement,delete e.templateChildCount,delete fe[t])},ve=function(t,e,n,i,u,o,a){var s=i*a;switch(n){case g.add:var l=o.cloneNode(!0);Me(l,t);var c=u.childNodes[s];u.insertBefore(l,c?c:null);break;case g.remove:for(var f=0;a>f;f++){var h=u.childNodes[s];Me(h,r),u.removeChild(h)}break;case g.change:for(f=s;s+a>f;f++){var d=u.childNodes[f];Me(d,r),Me(d,t)}}},ge=function(t,e){ve(t,r,g.add,e,this.parentElement,this.template,this.templateChildCount)},me=function(t,e,n,r){var i,u;c(this._elementMaps,function(o,a){var s=de(o);if(s)if(0===a.length)this.isArray&&ve(t,e,n,r,s.parentElement,s.template,s.templateChildCount);else{for(i=t,u=1;i&&u<a.length;u++)m(i)&&(i._elementMaps||(i._elementMaps={},i.on(g.add,me),i.on(g.remove,me),i.on(g.change,me)),i._elementMaps[o]=a.slice(u)),i=v(i,a[u]);for(u!==a.length||n!==g.change&&n!==g.add||(m(i)?i.isArray&&(i._elementMaps||(i._elementMaps={},i.on(g.add,me),i.on(g.remove,me),i.on(g.change,me)),i._elementMaps[o]=[],i.forEach(ge,s)):d(i)&&l(i,ge,s)),i=e,u=1;i&&u<a.length;u++)m(i)&&(o in i._elementMaps&&delete i._elementMaps[o],y(i._elementMaps)||(delete i._elementMaps,i.off(g.add,me),i.off(g.remove,me),i.off(g.change,me))),i=v(i,a[u])}else delete this._elementMaps[o],y(this._elementMaps)||(delete this._elementMaps,this.off(g.add,me),this.off(g.remove,me),this.off(g.change,me))},this)},ye=function(t,e,n,u){for(var o,a,s=!1,l=n,c=i.createDocumentFragment(),f=0,h=u.firstChild;h;h=u.firstChild)h.nodeType===E.element||h.nodeType===E.text?(c.appendChild(h),f++):u.removeChild(h);if(0!==f){for(o=0;l&&o<e.length;o++)a=e[o],m(l)&&(s=!0,l._elementMaps||(l._elementMaps={},l.on(g.add,me),l.on(g.remove,me),l.on(g.change,me)),l._elementMaps[t]=e.slice(o)),l=v(l,a);if(o===e.length)if(m(l))l.isArray&&(s=!0,l._elementMaps||(l._elementMaps={},l.on(g.add,me),l.on(g.remove,me),l.on(g.change,me)),l._elementMaps[t]=[],l.forEach(function(t,e){ve(l.get(e),r,g.add,e,u,c,f)}));else if(d(l))for(o=0;o<l.length;o++)ve(l[o],r,g.add,o,u,c,f);s&&(this.id=t,this.template=c,this.parentElement=u,this.templateChildCount=f)}},be=function(t,e,n,r){for(var i=ue(e),u=t,o=0;u&&o<i.length-1;o++)u=u[i[o]];if(u){var a=i[o];if(1===i.length&&T[a]){if(f(n)||s("Event '"+a+"' must bind to function."),r){var l=r[a];l&&$(t,a,l),r[a]=n}B(t,a,n)}else u[S[a]||a]=n}},we=function(t,e,n,r){var i,u,o,a;c(this._propertyMaps,function(s,l){i=le(s),i?c(l,function(l,c){if(1===c.length&&c[0]===r)be(i.element,l,t,i.eventListeners);else if(c.length>1&&c[0]===r){for(u=t,o=1;u&&o<c.length;o++)m(u)&&(u._propertyMaps||(u._propertyMaps={},u.on(g.change,we),u.on(g.remove,we),u.on(g.add,we)),s in u._propertyMaps||(u._propertyMaps[s]={}),u._propertyMaps[s][l]=c.slice(o)),u=v(u,c[o]);for(o!==c.length||n!==g.change&&n!==g.add||be(i.element,l,u,i.eventListeners),u=e,o=1;u&&o<c.length;o++)m(u)&&(a=u._propertyMaps[s],a&&delete a[l],y(a)||delete u._propertyMaps[s],y(u._propertyMaps)||(delete u._propertyMaps,u.off(g.change,we),u.off(g.remove,we),u.off(g.add,we))),u=v(u,c[o])}}):(delete this._propertyMaps[s],y(this._propertyMaps)||(delete this._propertyMaps,this.off(g.change,we),this.off(g.remove,we),this.off(g.add,we)))},this)},Ee=function(t,e,n){m(t)?t.set(e,n):h(t)&&(t[e]=n)},xe=function(t,e,n){for(var r=t,i=0;r&&i<e.length-1;i++)r=v(r,e[i]);Ee(r,e[i],n)},Ae=function(e){e=e||t.event;var n=e.target||e.srcElement;if(n&&(n.nodeType===E.text&&(n=n.parentNode),ne(n,e))){var r=F(n),i=le(r);if(!i)return void ee(n,e.type,Ae);var u=i.data;c(i.propertyBackMap,function(t,e){xe(u,e,n[t])})}},Pe=function(t,e,n,i,u){var o,a,s,l,f,h=!1,d=!1,p={};e&&c(e,function(e,n){for(o=i,a=!1,s=0;o&&s<n.length;s++)l=n[s],m(o)&&(a=!0,h=!0,o._propertyMaps||(o._propertyMaps={},o.on(g.change,we),o.on(g.remove,we),o.on(g.add,we)),t in o._propertyMaps||(o._propertyMaps[t]={}),o._propertyMaps[t][e]=n.slice(s)),o=v(o,l);s===n.length&&be(u,e,o,a?p:r)}),n&&c(n,function(t,e){f=ie(u,t),f&&(d=!0,f.add(u,Ae),xe(i,e,u.value))}),h&&(this.element=u,this.eventListeners=p),d&&(this.data=i,this.propertyBackMap=n),(h||d)&&(I(u,t),this.id=t)},_e=function(t,e,n){var i,u,o,a,l,c=!0,f=!1;if(t.nodeType!==E.element)return c;if(i=F(t),e===r){if(!i)return c;ce(i),pe(i),H(t)}else{if(i&&s("'element' already has data binding."),o=N(t),a=oe(o,n),o=U(t),l=oe(o,n),(a||l)&&(i=W(),u=new Pe(i,a,l,e,t),u.id&&(se(u),f=!0)),o=K(t)){var h=ue(o,!0);h||s("Each declaration '"+o+"' must be valid."),i=i||W(),u=new ye(i,h,e,t),u.id&&(he(u),f=!0),c=!1}f&&I(t,i)}return c},Ce=function(t,e,n){l(t,function(t){t.nodeType===E.element&&Me(t,e,n)})},Me=function(t,e,n){var r=_e(t,e,n);r&&t.hasChildNodes&&Ce(t.childNodes,e,n)},Oe=function(t,e){var n;if(t.nodeType)Me(t,e);else if(p(t.length)){var r=t;if(r.length<1)return;if(arguments.length>1)for(n=0;n<r.length-1;n++)r[n].nextSibling!==r[n+1]&&s("When 'root' is a collection of DOM elements, the elements must be siblings under one parent node.");Ce(r,e)}else s("'root' must be DOM element or collection of DOM sibling elements.")},ke=function(t){Oe(t,r)};n.bind=Oe,n.unbind=ke,u&&(u.fn.dataBind=function(t){return this.each(function(){Oe(this,t)})},u.fn.dataUnbind=function(){return this.each(function(){ke(this)})})}}(this.window,!this.window&&require,this.jsMVC||exports),function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=n._,u=i.trigger,o=i.listen,a=i.executeGlobalErrorFilters,s=i.isString,l=i.forEachItem,c=i.forEachKey,f=i.copyProperties,h=i.isObject,d=n.status,p=n.Area,v=n.Controller,g=n.Route,m=n.Filter,y="id",b=!1,w={areas:p,controllers:v,routes:g},E=function(e){n.on("request",function(t){var e=t.virtualPath,n=t.routeData;if(n){n.dataTokens.event=t;try{n.routeHandler(n,e)}catch(r){t.status=d.internalError,t.error=r,u("fail",t)}}else u("fail",t)}).on("fail",function(t){t.status=d.badRequest,t.error=new Error("Route cannot be found."),a(t)}),o(e),t&&u("request",n.current())},x=function(t){return e&&s(t)&&(t=e(t)),h(t)&&(l(t.filters,function(t){m(t)}),c(w,function(e,n){c(t[e],function(t,e){r.call(e,y)||(e[y]=t),n(e)})}),f(x,t)),b||(b=!0,E(t&&t.ready)),n};n.config=x}(this.window,!this.window&&require,this.jsMVC||exports);